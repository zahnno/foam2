p({"class":"foam.nanos.script.Script","id":"Test Email","enabled":true,"description":"","lastRun":"2018-07-24T19:09:31.798Z","lastDuration":1063,"server":true,"status":1,"code":"import foam.util.Emails.EmailsUtility; \n\nemail = x.get(\"email\");\nprint(\"email: \"+email.getClass());\nuser = x.get(\"user\");\nprint(\"user: \"+user.getId());\nmessage = new foam.nanos.notification.email.EmailMessage();\nmessage.setTo(new String[] { \"joel@nanopay.net\" });\nmessage.setSubject(\"test\");\nmessage.setBody(\"test\");\nprint(\"message: \"+message);\nEmailsUtility.sendEmailFromTemplate(x, null, message, null, null);  \nmessage = new foam.nanos.notification.email.EmailMessage();\nmessage.setTo(new String[] { \"joel@nanopay.net\" });\nmap = new java.util.HashMap();\nmap.put(\"content\", user.getFirstName());\nEmailsUtility.sendEmailFromTemplate(x, user, message, \"testEmail\", map);\n \nprint(\"DONE\");","output":"email: class foam.nanos.notification.email.DAOEmailService\nuser: 1348\nmessage: id: 0, created: null, createdBy: null, to: [Ljava.lang.String;@3beb6300, cc: null, bcc: null, subject: test, body: test\nDONE\n","notes":""})
